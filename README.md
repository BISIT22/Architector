# Разработка системы на основе локальной языковой модели для генерации процедурных инструкций для 3D-моделирования архитектурных объектов

## Дипломная работа

**Автор:** Алексей Марышев  
**Руководитель:** [ФИО руководителя]  
**Учебное заведение:** [Название учебного заведения]  
**Год:** 2025

## Описание проекта

Система представляет собой комплексное решение для автоматической генерации процедурных инструкций создания 3D-моделей архитектурных объектов с использованием локальной языковой модели Gemma. Система включает в себя веб-интерфейс, базу данных для хранения результатов и модуль 3D-визуализации в браузере.

## Основные возможности
- Генерация процедурных JSON-инструкций для 3D-моделирования (компоненты, примитивы, геометрия, материалы)
- Анализ изображений архитектурных объектов (опционально)
- Улучшение инструкций на основе обратной связи
- Сохранение результатов и истории запросов в локальную БД (SQLite)
- Веб-интерфейс на Streamlit с разделами: генерация, история, аналитика, избранное, поиск, обратная связь
- Визуализация 3D‑модели в браузере (Three.js) по сгенерированным инструкциям

## Технологический стек
- ЯП: Python 3.10+
- LLM: Gemma (через Ollama, локальный inference)
- Веб: Streamlit
- БД: SQLite (SQLAlchemy ORM, Alembic для миграций при необходимости)
- Визуализация: Three.js (через Streamlit components)
- Логирование: loguru

## Требования к окружению
- Python 3.10+
- Ollama с установленной моделью Gemma (gemma:2b/gemma2:2b либо gemma3:4b при наличии)
- 16GB RAM (рекомендуется), GPU 8GB VRAM (опционально)

## Структура проекта
```
architector/
├── README.md
├── requirements.txt
├── .env
├── src/
│   ├── core/
│   │   ├── ai_model.py            # Работа с LLM (Gemma через Ollama)
│   │   └── image_processor.py     # Обработка изображений (опционально)
│   ├── database/
│   │   ├── connection.py          # Подключение и инициализация БД
│   │   ├── models.py              # ORM модели (SQLAlchemy)
│   │   └── operations.py          # CRUD/аналитика
│   ├── visualization/
│   │   ├── web_3d_viewer.py       # Визуализация Three.js в Streamlit
│   │   └── __init__.py
│   └── web/
│       └── app.py                 # Streamlit приложение (UI)
├── data/
│   └── architect.db               # SQLite база данных (локальная)
├── docs/
│   ├── database_features.md       # Описание возможностей БД
│   ├── database_persistence.md    # Сохранение данных между запусками
│   └── data_model.md              # Модель данных и миграции
└── scripts/
    ├── init_database.py           # Инициализация/проверка БД
    └── setup_ollama.py            # Настройка Ollama и модели
```

## Установка и запуск

1. Клонируйте репозиторий
2. Создайте виртуальное окружение: `python -m venv venv`
3. Активируйте окружение: `venv\Scripts\activate` (Windows)
4. Установите зависимости: `pip install -r requirements.txt`
5. Установите и запустите Ollama, загрузите модель Gemma: `ollama pull gemma:2b` (или другую доступную)
6. Инициализируйте базу данных: `python scripts/init_database.py`
7. Запустите веб-приложение: `streamlit run src/web/app.py`

## Быстрый старт (пользовательский сценарий)
- Откройте раздел "Генерация Инструкций" и опишите архитектурный объект
- Получите JSON‑инструкции, при необходимости отредактируйте/улучшите
- Нажмите "Показать 3D модель" — визуализация на основе инструкций отобразится в браузере
- Сохраните результат в избранное, оставьте обратную связь
- Перейдите в "3D Галерею" и просматривайте ранее сгенерированные модели

## Структура JSON‑инструкций (пример)
```json
{
  "object_type": "building",
  "style": "modern",
  "components": [
    {
      "name": "Base",
      "type": "cube",
      "position": [0, 0.5, 0],
      "scale": [10, 1, 10],
      "rotation": [0, 0, 0],
      "material": "бетон"
    }
  ],
  "modifiers": []
}
```

## Научная новизна и вклад
- Применимость локальных языковых моделей для генерации процедурных описаний 3D‑моделирования архитектурных объектов
- Единый JSON‑формат инструкций с покрытием геометрии, трансформаций и материалов
- Полностью локальная связка: LLM → JSON → WebGL‑визуализация (Three.js) без внешних сервисов
- Информационная система с историей запросов, обратной связью и аналитикой производительности модели

## Перспективы развития
- Интеграция с Blender API для автоматической сборки сцены из JSON внутри Blender
- Экспорт результатов в форматы .obj/.fbx/.gltf
- Циклы самоулучшения (self‑refinement) с метриками качества и сравнениями версий
- Переход на PostgreSQL и контейнеризация (Docker) для деплоя

## Лицензия
MIT
